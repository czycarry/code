# Netty HTTP æœåŠ¡å™¨

åŸºäº Netty æ¡†æ¶å®ç°çš„ç®€å• HTTP æœåŠ¡å™¨ç¤ºä¾‹é¡¹ç›®ã€‚

## åŠŸèƒ½ç‰¹æ€§

- åŸºäº Netty 4.x æ¡†æ¶
- æ”¯æŒ HTTP/1.1 åè®®
- æä¾›å¤šä¸ªç¤ºä¾‹æ¥å£
- æ”¯æŒ GET å’Œ POST è¯·æ±‚
- **é™æ€æ–‡ä»¶æœåŠ¡ï¼ˆHTML/CSS/JSï¼‰**
- **ç°ä»£åŒ–å‰ç«¯ç•Œé¢**
- **äº¤äº’å¼ API æ¼”ç¤ºé¡µé¢**
- åŒ…å«æ—¥å¿—è®°å½•åŠŸèƒ½

## æŠ€æœ¯æ ˆ

**åç«¯:**
- Java 11+
- Netty 4.1.104
- Maven 3.x
- SLF4J + Logback

**å‰ç«¯:**
- HTML5
- CSS3 (å“åº”å¼è®¾è®¡)
- JavaScript (ES6+)

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ pom.xml                          # Maven é…ç½®æ–‡ä»¶
â”œâ”€â”€ README.md                        # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ src/
    â””â”€â”€ main/
        â”œâ”€â”€ java/
        â”‚   â””â”€â”€ com/
        â”‚       â””â”€â”€ example/
        â”‚           â”œâ”€â”€ HttpServer.java          # æœåŠ¡å™¨ä¸»ç±»
        â”‚           â””â”€â”€ HttpServerHandler.java   # HTTP è¯·æ±‚å¤„ç†å™¨ï¼ˆå«é™æ€æ–‡ä»¶æœåŠ¡ï¼‰
        â””â”€â”€ resources/
            â”œâ”€â”€ static/                           # é™æ€èµ„æºç›®å½•
            â”‚   â”œâ”€â”€ index.html                   # é¦–é¡µ
            â”‚   â”œâ”€â”€ css/
            â”‚   â”‚   â””â”€â”€ style.css                # æ ·å¼æ–‡ä»¶
            â”‚   â”œâ”€â”€ js/
            â”‚   â”‚   â”œâ”€â”€ main.js                  # ä¸» JavaScript æ–‡ä»¶
            â”‚   â”‚   â””â”€â”€ api-demo.js              # API æ¼”ç¤ºé¡µé¢è„šæœ¬
            â”‚   â””â”€â”€ pages/
            â”‚       â”œâ”€â”€ api-demo.html            # API æ¼”ç¤ºé¡µé¢
            â”‚       â””â”€â”€ about.html               # å…³äºé¡µé¢
            â””â”€â”€ logback.xml                      # æ—¥å¿—é…ç½®
```

## è„šæœ¬è¯´æ˜

é¡¹ç›®æä¾›äº†å®Œæ•´çš„å¯åŠ¨ã€åœæ­¢å’Œé‡å¯è„šæœ¬ï¼Œæ”¯æŒ Windows å’Œ Linux/Mac ç³»ç»Ÿï¼š

| è„šæœ¬æ–‡ä»¶ | å¹³å° | åŠŸèƒ½ | è¯´æ˜ |
|---------|------|------|------|
| `start.bat` / `start.sh` | Windows / Linux | å¯åŠ¨æœåŠ¡å™¨ | ä½¿ç”¨ Maven ç¼–è¯‘å¹¶è¿è¡Œ |
| `start-jar.bat` / `start-jar.sh` | Windows / Linux | å¯åŠ¨æœåŠ¡å™¨ | ä½¿ç”¨æ‰“åŒ…åçš„ JAR æ–‡ä»¶è¿è¡Œ |
| `stop.bat` / `stop.sh` | Windows / Linux | åœæ­¢æœåŠ¡å™¨ | é€šè¿‡ç«¯å£å·æŸ¥æ‰¾å¹¶åœæ­¢è¿›ç¨‹ |
| `restart.bat` / `restart.sh` | Windows / Linux | é‡å¯æœåŠ¡å™¨ | å…ˆåœæ­¢å†å¯åŠ¨æœåŠ¡å™¨ |

æ‰€æœ‰è„šæœ¬éƒ½æ”¯æŒå‘½ä»¤è¡Œå‚æ•°æŒ‡å®šç«¯å£å·ï¼Œé»˜è®¤ç«¯å£ä¸º 8080ã€‚

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- JDK 11 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬

### ç¼–è¯‘é¡¹ç›®

```bash
mvn clean compile
```

### è¿è¡ŒæœåŠ¡å™¨

**æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰**

Windows ç³»ç»Ÿï¼š
```cmd
# ä½¿ç”¨ Maven è¿è¡Œï¼ˆé»˜è®¤ç«¯å£ 8080ï¼‰
start.bat

# æŒ‡å®šç«¯å£
start.bat 9090

# ä½¿ç”¨ JAR æ–‡ä»¶è¿è¡Œ
start-jar.bat
start-jar.bat 9090
```

Linux/Mac ç³»ç»Ÿï¼š
```bash
# æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
chmod +x start.sh start-jar.sh stop.sh restart.sh

# ä½¿ç”¨ Maven è¿è¡Œï¼ˆé»˜è®¤ç«¯å£ 8080ï¼‰
./start.sh

# æŒ‡å®šç«¯å£
./start.sh 9090

# ä½¿ç”¨ JAR æ–‡ä»¶è¿è¡Œ
./start-jar.sh
./start-jar.sh 9090
```

**åœæ­¢æœåŠ¡å™¨**

Windows ç³»ç»Ÿï¼š
```cmd
# åœæ­¢è¿è¡Œåœ¨é»˜è®¤ç«¯å£ 8080 çš„æœåŠ¡å™¨
stop.bat

# åœæ­¢è¿è¡Œåœ¨æŒ‡å®šç«¯å£çš„æœåŠ¡å™¨
stop.bat 9090
```

Linux/Mac ç³»ç»Ÿï¼š
```bash
# åœæ­¢è¿è¡Œåœ¨é»˜è®¤ç«¯å£ 8080 çš„æœåŠ¡å™¨
./stop.sh

# åœæ­¢è¿è¡Œåœ¨æŒ‡å®šç«¯å£çš„æœåŠ¡å™¨
./stop.sh 9090
```

**é‡å¯æœåŠ¡å™¨**

Windows ç³»ç»Ÿï¼š
```cmd
# é‡å¯è¿è¡Œåœ¨é»˜è®¤ç«¯å£ 8080 çš„æœåŠ¡å™¨
restart.bat

# é‡å¯è¿è¡Œåœ¨æŒ‡å®šç«¯å£çš„æœåŠ¡å™¨
restart.bat 9090
```

Linux/Mac ç³»ç»Ÿï¼š
```bash
# é‡å¯è¿è¡Œåœ¨é»˜è®¤ç«¯å£ 8080 çš„æœåŠ¡å™¨
./restart.sh

# é‡å¯è¿è¡Œåœ¨æŒ‡å®šç«¯å£çš„æœåŠ¡å™¨
./restart.sh 9090
```

**æ–¹å¼äºŒï¼šæ‰‹åŠ¨è¿è¡Œ**

ä½¿ç”¨ Maven è¿è¡Œï¼š
```bash
mvn exec:java -Dexec.mainClass="com.example.HttpServer"
mvn exec:java -Dexec.mainClass="com.example.HttpServer" -Dexec.args="9090"
```

æ‰“åŒ…åè¿è¡Œï¼š
```bash
# æ‰“åŒ…é¡¹ç›®
mvn clean package

# è¿è¡Œ JAR æ–‡ä»¶ï¼ˆé»˜è®¤ç«¯å£ 8080ï¼‰
java -jar target/netty-http-server-1.0.0.jar

# æŒ‡å®šç«¯å£
java -jar target/netty-http-server-1.0.0.jar 9090
```

### è®¿é—®æœåŠ¡

æœåŠ¡å™¨å¯åŠ¨åï¼Œé»˜è®¤ç›‘å¬ `8080` ç«¯å£ã€‚

**å‰ç«¯é¡µé¢:**
- ğŸ  é¦–é¡µï¼šhttp://localhost:8080/
- ğŸ§ª API æ¼”ç¤ºé¡µé¢ï¼šhttp://localhost:8080/static/pages/api-demo.html
- â„¹ï¸ å…³äºé¡µé¢ï¼šhttp://localhost:8080/static/pages/about.html

**API æ¥å£:**
- Hello æ¥å£ï¼šhttp://localhost:8080/hello
- æ•°æ®æ¥å£ï¼šhttp://localhost:8080/api/data
- å›æ˜¾æ¥å£ï¼šPOST http://localhost:8080/api/echo

### æµ‹è¯•ç¤ºä¾‹

ä½¿ç”¨ curl æµ‹è¯•æ¥å£ï¼š

```bash
# è®¿é—®é¦–é¡µ
curl http://localhost:8080/

# è®¿é—® Hello æ¥å£
curl http://localhost:8080/hello

# è®¿é—®æ•°æ®æ¥å£
curl http://localhost:8080/api/data

# æµ‹è¯• POST å›æ˜¾æ¥å£
curl -X POST http://localhost:8080/api/echo -d "Hello, Netty!"
```

## ä»£ç è¯´æ˜

### HttpServer.java

æœåŠ¡å™¨ä¸»ç±»ï¼Œè´Ÿè´£ï¼š
- åˆå§‹åŒ– Netty æœåŠ¡å™¨
- é…ç½® Channel Pipeline
- ç»‘å®šç«¯å£å¹¶å¯åŠ¨æœåŠ¡

### HttpServerHandler.java

HTTP è¯·æ±‚å¤„ç†å™¨ï¼Œè´Ÿè´£ï¼š
- å¤„ç†ä¸åŒç±»å‹çš„ HTTP è¯·æ±‚
- æ ¹æ® URI è·¯ç”±åˆ°ä¸åŒçš„å¤„ç†é€»è¾‘
- **é™æ€æ–‡ä»¶æœåŠ¡ï¼ˆHTML/CSS/JS/å›¾ç‰‡ç­‰ï¼‰**
- ç”Ÿæˆå¹¶è¿”å› HTTP å“åº”
- è‡ªåŠ¨è¯†åˆ«èµ„æºç±»å‹å¹¶è®¾ç½®æ­£ç¡®çš„ Content-Type

## è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹æœåŠ¡å™¨ç«¯å£

**æ–¹å¼ä¸€ï¼šé€šè¿‡å‘½ä»¤è¡Œå‚æ•°ï¼ˆæ¨èï¼‰**
```bash
# Windows
start.bat 9090

# Linux/Mac
./start.sh 9090

# æˆ–ç›´æ¥è¿è¡Œ JAR
java -jar target/netty-http-server-1.0.0.jar 9090
```

**æ–¹å¼äºŒï¼šä¿®æ”¹ä»£ç **
å¦‚éœ€ä¿®æ”¹é»˜è®¤ç«¯å£ï¼Œå¯ä»¥ç¼–è¾‘ `HttpServer.java` ä¸­çš„ `DEFAULT_PORT` å¸¸é‡ï¼š

```java
private static final int DEFAULT_PORT = 8080;  // ä¿®æ”¹ä¸ºä½ æƒ³è¦çš„é»˜è®¤ç«¯å£
```

## å‰ç«¯é¡µé¢è¯´æ˜

é¡¹ç›®åŒ…å«å®Œæ•´çš„å‰ç«¯é¡µé¢æ¨¡å—ï¼š

1. **é¦–é¡µ (index.html)**: å±•ç¤ºæœåŠ¡å™¨åŠŸèƒ½å’Œå¿«é€Ÿé“¾æ¥
2. **API æ¼”ç¤ºé¡µé¢ (api-demo.html)**: äº¤äº’å¼æµ‹è¯• API æ¥å£
3. **å…³äºé¡µé¢ (about.html)**: é¡¹ç›®ä»‹ç»å’ŒæŠ€æœ¯æ ˆè¯´æ˜

æ‰€æœ‰å‰ç«¯èµ„æºä½äº `src/main/resources/static/` ç›®å½•ä¸‹ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨æä¾›é™æ€æ–‡ä»¶æœåŠ¡ã€‚

## æ‰©å±•å¼€å‘

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰©å±•åŠŸèƒ½ï¼š

1. åœ¨ `HttpServerHandler` ä¸­æ·»åŠ æ–°çš„è·¯ç”±å¤„ç†é€»è¾‘
2. å®ç°æ›´å¤æ‚çš„ä¸šåŠ¡é€»è¾‘
3. æ·»åŠ ä¸­é—´ä»¶ï¼ˆå¦‚è®¤è¯ã€é™æµç­‰ï¼‰
4. æ”¯æŒ WebSocket åè®®
5. åœ¨å‰ç«¯æ·»åŠ æ›´å¤šäº¤äº’åŠŸèƒ½
6. é›†æˆå‰ç«¯æ¡†æ¶ï¼ˆå¦‚ Vueã€React ç­‰ï¼‰

## è®¸å¯è¯

MIT License
